<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<style>
.table{
    color:white
}
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input { 
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color:  #26c6da;
}

input:focus + .slider {
  box-shadow: 0 0 1px #26c6da;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}
.project-tab {
    padding: 10%;
    margin-top: -8%;
}
.project-tab #tabs{
    background: #007b5e;
    color: #eee;
}
.project-tab #tabs h6.section-title{
    color: #eee;
}
.project-tab #tabs .nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
    color: #0062cc;
    background-color: transparent;
    border-color: transparent transparent #f3f3f3;
    border-bottom: 3px solid !important;
    font-size: 16px;
    font-weight: bold;
}
.project-tab .nav-link {
    border: 1px solid transparent;
    border-top-left-radius: .25rem;
    border-top-right-radius: .25rem;
    color: #0062cc;
    font-size: 16px;
    font-weight: 600;
}
.project-tab .nav-link:hover {
    border: none;
}
.project-tab thead{
    background: #f3f3f3;
    color: #333;
}
.project-tab a{
    text-decoration: none;
    color: #333;
    font-weight: 600;
}
@media screen and (max-width: 800px) {
        .table-present-1{
            width:100% !important;}
        .table-present-2{
            width: 100% !important;
            position: initial !important
        }
    }
    #wrapper {
        border: 1px solid #888;
        display: inline-block;
        padding: 20px;
    }
    /* #carouselExampleIndicators{
        height: 300px;
    } */
    .carousel-item {
        text-align: center
    }
    .block{
        display:inline-block;
    }
    #header {
        color: #1e90ff;
        text-align: center;
    }
    .img{
        display:inline-block
    }
    /*#outputTable{
        display: flex;
        justify-content: center
        display: grid;
        grid-template-columns: auto auto auto
        text-align: center 
    }*/
    #alert {
        color: red
    }
    .button {
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 20px;
    }
    /*.output {
        width: 33%;
        display: inline-block;
        vertical-align: top
    }*/
    #row {
        border: 1px solid black;

    }
    #form {
        display: inline
    }
    #suburb {
        height: 30px;
        padding: 5px;
        width: 262px;
        display: inline-block
    }
    #label-type {
        height: 20px
    }
    .label-type-2 {
        width: 20%;
        height: 25px display： inline-block；
    }
    .table-present-1 {
        width: 65%;
        display: inline-block;
    }
    .table-present-2{
        width: 30%;
        display: inline-block;
        position: absolute;
        top: 3%;
        left: 70%
    }
    #button {
        width: 90px;
        display: inline;
        background-color: #26c6da;
    }
    /* #outputTableArt {
        border: 1px solid black;
        width: 33.33%
    } */
    /* Set the size of the div element that contains the map */
    #map {
        height: 400px;
        /* The height is 400 pixels */
        width: 100%;
        /* The width is the width of the web page */
    }
    #main-area{
        position: relative;
    }
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    #locationField, #controls {
        position: relative;
        width: 480px;
    }
    #locationField {
        height: 20px;
        margin-bottom: 2px;
    }
    .autocomplete {
        /*the container must be positioned relative:*/
        position: relative;
        display: inline-block;
    }
    .autocomplete-items {
        position: absolute;
        border: 1px solid #d4d4d4;
        border-bottom: 5px solid #d4d4d4;
        border-top: 5px solid #d4d4d4;
        z-index: 99;
        top: 19%;
        left: 58px;
        right: 95px;
        height: 50%;
        overflow: scroll;
    }
    .autocomplete-items div {
        padding: 10px;
        cursor: pointer;
        background-color: #fff;
        border-bottom: 1px solid #d4d4d4;
    }
    .autocomplete-items div:hover {
        /*when hovering an item:*/
        background-color: #e9e9e9;
    }
    .autocomplete-active {
        /*when navigating through the items using the arrow keys:*/
        background-color: DodgerBlue !important;
        color: #ffffff;
    }
        .test-div{
        width: 100%;
        position: relative;
        height: 60px
    }
    .first-of-div{
        display: inline-block;
        width: 100px;
        height: 40px;
        position: absolute;
        bottom: 0
    }
    .second-of-div{
        width: 40px;
        height: 40px;
        display: inline-block;
        position: absolute;
        bottom: 0;
        left: 100px;
    }
    .third-of-div{
        width: 60px;
        height: 40px;
        display: inline-block;
        position: absolute;
        bottom: 0;
        left: 200px;
        margin-bottom: 0
    }
</style>
<h3 id='test'>Search by themes</h3>
<div id='main-area'>
    <div class="table-present-1">
        <div id="map"></div>
    </div>
    <div class="table-present-2">
        <fieldset id='legend'>
            <legend>Filter</legend>
            Suburb: <input type='text' name='suburb' id='suburb' placeholder="Enter your preferred suburb name">
            <legend>Theme</legend>
            <div class="test-div"><span class="first-of-div">Art: </span>
                <input class="second-of-div" type='image' src='https://www.alwayscherie.ml/wp-content/uploads/2019/04/art-e1554804124459.png' id='icon_art' class='img' onclick="handleSubmit('art');return false">
                <label class="switch third-of-div" onclick="handleSubmit('art')">
                      <input type="checkbox" id='checkArt' checked>
                      <span class="slider round"></span>
                </label>
            </div>
            <div class="test-div"><span class="first-of-div">Fountain: </span>     
                <input class="second-of-div" type='image' src='https://www.alwayscherie.ml/wp-content/uploads/2019/04/new_fountain-e1554968248774.png' id='icon_fountain' class='img' onclick="handleSubmit('drinkingFountain');return false">
                <label class="switch third-of-div" onclick="handleSubmit('drinkingFountain')">
                        <input type="checkbox" id='checkFt' checked>
                        <span class="slider round"></span>
                      </label>
            </div>
            <div class="test-div"><span class="first-of-div">Monument: </span> 
                <input class="second-of-div" type='image' src='https://www.alwayscherie.ml/wp-content/uploads/2019/04/monument_new-e1556386212609.jpeg' id='icon_monument' class='img' onclick="handleSubmit('monument');return false">
                <label class="switch third-of-div" onclick="handleSubmit('monument')">
                        <input type="checkbox" id='checkMon' checked>
                        <span class="slider round"></span>
                </label>
            </div>
            <input id='button' class='button' type="button" value="Show" onclick="handleSubmit()">
        </fieldset>
        <p id="alert">Note: The number within the cluster indicates the density of activities in that suburb</p>
    </div>
</div>
<div id='outputTable' class="container">
        <ul class="nav nav-tabs nav-fill" id="nav-tab" role="tablist"></ul>
        <div class="tab-content" id="nav-tabContent"></div>
</div>
<script type="text/javascript" src="http://www.alwayscherie.ml/wp-content/uploads/2019/04/drinkingfountain.js"></script>
<script type="text/javascript" src="http://www.alwayscherie.ml/wp-content/uploads/2019/04/art.js"></script>
<script type="text/javascript" src="http://www.alwayscherie.ml/wp-content/uploads/2019/04/monument.js"></script>
<script type="text/javascript" src="https://www.alwayscherie.ml/wp-content/plugins/misc/map-suburb.js"></script>
<script>
    // extract all suburb name for autocomplete function
    var suburbLists = []
    for(var i = 0; i < suburb.length; i++){
        suburbLists.push(suburb[i].Suburb)
    }
    var markers = []
    var art_markers = []
    var ft_markers = []
    var mon_markers = []
    var map, x
    var informWindow
    // control the pop up window in the map
    function openWindow(map, marker) {
        informWindow = new google.maps.InfoWindow({
            content: marker.content,
            maxWidth: 200
        });
        informWindow.open(map, marker)
    }
    function closeWindow(map, marker) {
        informWindow.close(map, marker)
    }
    // find exact marker icon
    function checkMarkers(m) {
        var icon;
        if (m.Type_Id == 1) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/newest_art-e1555563415757.png';
        }
        else if (m.Type_Id == 2) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/fountain_marker-e1555563362173.png'
        }
        else if (m.Type_Id == 3) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/monument_marker-e1555563396630.png'
        }
        return icon
    }
    // add matching marker to map
    function addMark(m, map) {
        var total_markers = []
        var icon = ''
        var j
        var marker
        var contentString
        if (m[0].Type_Id == 1) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/newest_art-e1555563415757.png';
        }
        else if (m[0].Type_Id == 2) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/fountain_marker-e1555563362173.png'
        }
        else if (m[0].Type_Id == 3) {
            icon = 'https://www.alwayscherie.ml/wp-content/uploads/2019/04/monument_marker-e1555563396630.png'
        }
        for (var i = 0; i < m.length; i++) {
            var myLatLng = new google.maps.LatLng(parseFloat(m[i].Latitude), parseFloat(m[i].Longitude));
            if (m[0].Type_Id == 1) {
                marker = new google.maps.Marker({
                    position: myLatLng,
                    icon: icon,
                    animation: google.maps.Animation.DROP,
                    Postcode: m[i].Postcode,
                    Suburb: m[i].Suburb,
                    longitude: m[i].Longitude,
                    latitude: m[i].Latitude,
                    Type_Id: m[i].Type_Id,
                    Asset_Type: m[i].Asset_Type,
                    Name: m[i].Name,
                    Address: m[i].Address,
                    Artist: m[i].Artist,
                    Structure: m[i].Structure,
                    Art_date: m[i].Art_date,
                    content: m[i].Name
                });
            }
            else if (m[0].Type_Id == 2) {
                marker = new google.maps.Marker({
                    position: myLatLng,
                    icon: icon,
                    animation: google.maps.Animation.DROP,
                    Postcode: m[i].Postcode,
                    Suburb: m[i].Suburb,
                    longitude: m[i].Longitude,
                    latitude: m[i].Latitude,
                    Type_Id: m[i].Type_Id,
                    D1: m[i].D1,
                    D2: m[i].D2,
                    D3: m[i].D3,
                    content: m[i].D2
                });
            }
            else if (m[0].Type_Id == 3) {
                marker = new google.maps.Marker({
                    position: myLatLng,
                    icon: icon,
                    animation: google.maps.Animation.DROP,
                    Postcode: m[i].Postcode,
                    Suburb: m[i].Suburb,
                    longitude: m[i].Longitude,
                    latitude: m[i].Latitude,
                    Type_Id: m[i].Type_Id,
                    Theme: m[i].Theme,
                    Sub_Theme: m[i].Sub_Theme,
                    Feature_Name: m[i].Feature_Name,
                    content: m[i].Feature_Name
                });
            }
    
    
            if (marker.Type_Id == 1) {
                art_markers.push(marker)
            }
            else if (marker.Type_Id == 2) {
                ft_markers.push(marker)
            }
            else if (marker.Type_Id == 3) {
                mon_markers.push(marker)
            }
            markers.push(marker)
    
            // var infowindow = new google.maps.InfoWindow({
            //     content: marker.content,
            //     maxWidth: 200
            //   });
    
            google.maps.event.addListener(marker, 'click', (function (marker, j) {
                return function () {
                    displayTable([marker])
                    map.setZoom(16);
                    map.setCenter(marker.getPosition());
                }
            })(marker, j))
            google.maps.event.addListener(marker, 'mouseover', (function (marker, j) {
                return function () {
                    openWindow(map, marker, 'open');
                }
            })(marker, j))
            google.maps.event.addListener(marker, 'mouseout', (function (marker, j) {
                return function () {
                    closeWindow(map, marker, 'close');
                }
            })(marker, j))
    
    
            total_markers.push(marker)
    
        }
    
        var markerCluster = new MarkerClusterer(map, total_markers,
            {
                imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m',
                minimumClusterSize: 5
            }
        );
        // MarkerClusterer.Mini
    }
    // display information of selected location point
    function showInfo(m) {
        var outputart = document.getElementById('outputTableArt');
        var outputdt = document.getElementById('outputTableDf');
        var outputmonument = document.getElementById('outputTableMonument');
        var output_art = '';
        var output_dt = '';
        var output_monument = '';
        if (m.Type_Id == 1) {
            output_art += "<div id = 'row'>"
                + "<p> Name: " + m.Name + "</p>"
                + "<p> Structure: " + m.Structure + "</p>"
                + "<p> Artist: " + m.Artist + "</p>"
                + "<p> Date: " + m.Art_date + "</p>"
                + "<p> Type: " + m.Asset_Type + "</p>"
                + "<p> Suburb: " + m.Suburb + "</p>"
                + "<p> Postcode: " + m.Postcode + "</p>" + "</div>";
            outputart.innerHTML = output_art;
        }
        else if (m.Type_Id == 2) {
            output_dt += "<div id = 'row'>"
                + "<p> Name: " + m.D2 + "</p>"
                + "<p> Type: " + m.D3 + "</p>"
                + "<p> Suburb: " + m.Suburb + "</p>"
                + "<p> Postcode: " + m.Postcode + "</p>" + "</div>";
            outputdt.innerHTML = output_dt;
        }
    
        else if (m.Type_Id == 3) {
            output_monument += "<div id = 'row'>"
                + "<p> Theme: " + m.Theme + "</p>"
                + "<p> Sub Theme: " + m.Sub_Theme + "</p>"
                + "<p> Name: " + m.Feature_Name + "</p>"
                + "<p> Suburb: " + m.Suburb + "</p>"
                + "<p> Postcode: " + m.Postcode + "</p>" + "</div>";
            outputmonument.innerHTML = output_monument;
        }
    }
    // return position latitude and longitude
    function showLocation(position) {
        return position.coords;
        //var longitude = position.coords.longitude;
    
    }
    // handle the geolocation 
    function errorHandler(err) {
        if (err.code == 1) {
            alert("Error: Access is denied!");
        } else if (err.code == 2) {
            alert("Error: Position is unavailable!");
        }
    }
    // initilize the map
    function initMap(a,b) {
        var infoWindow
        var k
        var alert = document.getElementById('alert');   
        if (!a) {
            var uluru = { lat: -37.8136, lng: 144.9631 };
            // The map, centered at Uluru
            map = new google.maps.Map(
                document.getElementById('map'), { zoom: 12, center: uluru });
            infoWindow = new google.maps.InfoWindow;
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
    
                    infoWindow.setPosition(pos);
                    infoWindow.setContent('Your Current location');
                    infoWindow.open(map);
                    map.setCenter(pos);
                }, function () {
                    handleLocationError(true, infoWindow, map.getCenter());
                });
            } else {
                // Browser doesn't support Geolocation
                handleLocationError(false, infoWindow, map.getCenter());
            }
    
            function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                infoWindow.setPosition(pos);
                infoWindow.setContent(browserHasGeolocation ?
                    'Error: The Geolocation service failed.' :
                    'Error: Your browser doesn\'t support geolocation.');
                infoWindow.open(map);
            }
    
            addMark(art, map);
            addMark(monument, map);
            addMark(drinkingfountain, map);

        } else if (a.length == 0) {
            alert.innerHTML = "Sorry, there is no data for this area";
        }else if (!b) {
            alert.innerHTML = "Please enter a Suburb name to search";
        }
        else {
            var zooms = 12
            alert.innerHTML = "There are " + a.length + " results found";

            if (b!=''&&b!=null&&b!=false) {
                var loc = locateMap(a[1].Suburb);
                var uluru = { lat: Number(loc.Latitude), lng: Number(loc.Longitude) };
                displayTable(a);
                zooms = 16
            } else {
                var uluru = { lat: -37.8136, lng: 144.9631 };

            }
    
            // The map, centered at Uluru
            map = new google.maps.Map(
                document.getElementById('map'), { zoom: zooms, center: uluru });
            for (var i = 0; i < a.length; i++) {
                google.maps.event.addListener(a[i], 'click', (function (marker, k) {
                    return function () {
                        map.setZoom(16);
                        map.setCenter(marker.getPosition());
                    }
                })(a[i], k))
    
            }
            var markerCluster = new MarkerClusterer(map, a,
                {
                    imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m',
                    minimumClusterSize: 5
                });
            setTimeout(function() {
            map.setZoom(zooms-0.0001)},400);
        }
    }
    
    //locate Map by suburb
    function locateMap(sub) {
        for (var i = 0; i < suburb.length; i++) {
            if (suburb[i].Suburb.toLowerCase().replace(/\s/g, '') == sub.toLowerCase().replace(/\s/g, '')) {
                return suburb[i];
                break;
            }
        }
    }
    
    // highlight selected theme
    function highLight() {
        var imgProp = {
            'padding': '3px',
            'backgroundColor': '#eded01',
            'borderSize': '1ps',
            'borderStyle': 'dashed',
            'borderColor': '#0001fe'
        };
    
    }
    //main function to handle user input from fiterring 
    function handleSubmit(e) {
        $('#outputTable').hide()
        var ale = document.getElementById('alert');
        var patt = new RegExp("^[a-zA-Z]+$");
        var live_markers = []
        var suburb = ''
        suburb = document.getElementById('suburb').value
        var checkMon = document.getElementById('checkMon').checked
        var checkArt = document.getElementById('checkArt').checked
        var checkFt = document.getElementById('checkFt').checked
        // if (e) {
        //     if (e == 'art') {
        //         checkArt = !checkArt
        //     } else if (e == 'drinkingFountain') {
        //         checkFt = !checkFt
        //     } else if (e == 'monument') {
        //         checkMon = !checkMon
        //     }
        // }
        if (!(checkArt | checkFt | checkMon)) {
            ale.innerHTML = 'Please select at least 1 types'
            return
        }
        if (checkArt) {
            live_markers = art_markers
        }
        if (checkFt) {
            live_markers = live_markers.concat(ft_markers)
        }
        if (checkMon) {
            live_markers = live_markers.concat(mon_markers)
        }
        if (suburb != ''&& suburb != null) {
            if (patt.test(suburb.replace(/\s/g, ''))) {
                handleSuburb(suburb, live_markers)
            }
            else {
                ale.innerHTML = 'Please input a valid suburb name like SouthBank'
                return
            }
        } else if (suburb == '' || suburb == null) {
            initMap(live_markers,false)
        } else {
            ale.innerHTML = 'Unexpected error caught'
            return
        }
    
    }
    
    // filtering by suburb
    function handleSuburb(suburb, l) {
    
        var arr = [];
        for (var i = 0; i < l.length; i++) {
            if (l[i].Suburb.toLowerCase().replace(/\s/g, '') == suburb.toLowerCase().replace(/\s/g, '')) {
                arr.push(l[i]);
            }
        }
        initMap(arr,suburb)
    }
    // display all the matching point in that area
    function displayTable(row) {
        $('#outputTable').show()
        var artArr = []
        var ftArr = []
        var monArr = []
        var outputTab = ""
        var output = ""
    
        var num_type = 0
        var outputart = document.getElementById('artOutput');
        var outputdt = document.getElementById('ftOutput');
        var outputmonument = document.getElementById('monOutput');
        var found = false
        for (var i = 0; i < row.length; i++) {
            if (row[i].Type_Id == 1) {
                artArr.push(row[i])
            }
            else if (row[i].Type_Id == 2) {
                ftArr.push(row[i])
            }
            else if (row[i].Type_Id == 3) {
                monArr.push(row[i])
            }
        }
        if (artArr.length >= 1) {
            var col = '#00bfff'
            found = true
            outputTab += "<li><a class='nav-item nav-link active' data-toggle='tab' href='#artOutput' role='tab' aria-controls='artOutput' aria-selected='true'>Art</a></li>"
            output += "<div id = 'artOutput' class = 'output tab-pane fade show active' role='tabpanel' aria-labelledby='artOutput'> <h3 id = 'header'>Art</h3><table class='table'><thead style = 'background-color: #1e90ff'><tr><th scope='row'>Name</th><th scope='row'>Structure</th><th scope='row'>Date</th><th scope='row'>Type</th><th scope='row'>Suburb</th><th scope='row'>Postcode</th></tr></thead>";
            for (var i = 0; i < artArr.length; i++) {
                if(col == '#87cefa'){
                    col = '#00bfff'
                }else if(col == '#00bfff'){
                    col = '#87cefa'
                }
                output += "<tr style='background-color:"+col+"'><td>" + artArr[i].Name + "</td><td>" + artArr[i].Structure + "</td><td>" + artArr[i].Art_date + "</td><td>" + artArr[i].Asset_Type + "</td><td>" + artArr[i].Suburb + "</td><td>" + artArr[i].Postcode + "</td></tr>"
            }
            output += '</table></div>'
            document.getElementById("checkArt").checked = true;
        }else{
            outputTab += "<li><a class='nav-item nav-link' style='background-color: lightgray;'>Art</a></li>"
            //output += '<p>There is no result</p>'
            document.getElementById("checkArt").checked = false;
        }
        if (ftArr.length >= 1) {
            var col = '#00bfff'
            if(!found){
                outputTab += "<li><a class='nav-item nav-link active' data-toggle='tab' href='#ftOutput' role='tab' aria-controls='ftOutput' aria-selected='false'>Fountain</a></li>"
                output += "<div id = 'ftOutput' class = 'output tab-pane fade show active' role='tabpanel' aria-labelledby='ftOutput'><h3 id = 'header'>Fountain</h3><table class='table'><thead style = 'background-color: #1e90ff'><tr><th scope='row'>Fountain</th><th scope='row'>Name</th><th scope='row'>Type</th><th scope='row'>Suburb</th><th scope='row'>Postcode</th></tr></thead>";
                found = true
            }else{
                outputTab += "<li><a class='nav-item nav-link' data-toggle='tab' href='#ftOutput' role='tab' aria-controls='ftOutput' aria-selected='false'>Fountain</a></li>"
                output += "<div id = 'ftOutput' class = 'output tab-pane fade' role='tabpanel' aria-labelledby='ftOutput'><h3 id = 'header'>Fountain</h3><table class='table'><thead style = 'background-color: #1e90ff'><tr><th scope='row'>Fountain</th><th scope='row'>Name</th><th scope='row'>Type</th><th scope='row'>Suburb</th><th scope='row'>Postcode</th></tr></thead>";
            }

        for (var i = 0; i < ftArr.length; i++) {
            if(col == '#87cefa'){
                    col = '#00bfff'
                }else if(col == '#00bfff'){
                    col = '#87cefa'
                }
            output += "<tr style='background-color:"+col+"'><td>" + ftArr[i].D1 + "</td><td>" + ftArr[i].D2 + "</td><td>" + ftArr[i].D3 + "</td><td>" + ftArr[i].Suburb + "</td><td>" + ftArr[i].Postcode + "</td></tr>"
        }
            output += '</table></div>'
            document.getElementById("checkFt").checked = true;
        }else{
            outputTab += "<li><a class='nav-item nav-link' style='background-color: lightgray;'>Fountain</a></li>"
            // output += '<p>There is no result</p>'
            document.getElementById("checkFt").checked = false;
        }
        if (monArr.length >= 1) {
            var col = '#00bfff'
            if(!found){
                outputTab += "<li><a class='nav-item nav-link active' data-toggle='tab' href='#monOutput' role='tab' aria-controls='monOutput' aria-selected='false'>Monument</a></li>"
                output += "<div id = 'monOutput' class = 'output tab-pane fade show active' role='tabpanel' aria-labelledby='monOutput'><h3 id = 'header'>Monument</h3><table class='table'><thead style = 'background-color: #1e90ff'><tr><th scope='row'>Theme</th><th scope='row'>Sub Theme</th><th scope='row'>Feature Name</th><th scope='row'>Suburb</th><th scope='row'>Postcode</th></tr></thead>";
                found = true
            }else{
                outputTab += "<li><a class='nav-item nav-link' data-toggle='tab' href='#monOutput' role='tab' aria-controls='monOutput' aria-selected='false'>Monument</a></li>"
                output += "<div id = 'monOutput' class = 'output tab-pane fade' role='tabpanel' aria-labelledby='monOutput'><h3 id = 'header'>Monument</h3><table class='table'><thead style = 'background-color: #1e90ff'><tr><th scope='row'>Theme</th><th scope='row'>Sub Theme</th><th scope='row'>Feature Name</th><th scope='row'>Suburb</th><th scope='row'>Postcode</th></tr></thead>";
            }
    
            for (var i = 0; i < monArr.length; i++) {
                if(col == '#87cefa'){
                    col = '#00bfff'
                }else if(col == '#00bfff'){
                    col = '#87cefa'
                }
                output += "<tr style='background-color:"+col+"'><td>" + monArr[i].Theme + "</td><td>" + monArr[i].Sub_Theme + "</td><td>" + monArr[i].Feature_Name + "</td><td>" + monArr[i].Suburb + "</td><td>" + monArr[i].Postcode + "</td></tr>"
            }
            output += '</table></div>'
            document.getElementById("checkMon").checked = true;
        }else{
            outputTab += "<li><a class='nav-item nav-link' style='background-color: lightgray;'>Monument</a></li>"
            //output += '<p>There is no result</p>'
            document.getElementById("checkMon").checked = false;
        }
    
        // outputTab += '</ul>'
        // output += '</div>'
        document.getElementById('nav-tabContent').innerHTML = output
        document.getElementById('nav-tab').innerHTML = outputTab
    
    }
    //control click on the toggle button
    function newclick() {
        var checkMon = document.getElementById('checkMon').checked
        var checkArt = document.getElementById('checkArt').checked
        var checkFt = document.getElementById('checkFt').checked
    }
    
    var display = true // control the table display
    // test function for display control
    function handleDisplay(){
        if(display){
        document.getElementById("test").style.display = 'none';
    
        }else{
        document.getElementById("test").style.display = 'block'
        }
        display = !display
    }
    // autocomplete for suburb input
    function autocomplete(inp) {
       
        var arr = suburbLists
        /*the autocomplete function takes two arguments,
        the text field element and an array of possible autocompleted values:*/
        var currentFocus;
        // var value = 
        /*execute a function when someone writes in the text field:*/
        inp.addEventListener("input", function (e) {
            var a, b, val = this.value;
            /*close any already open lists of autocompleted values*/
            closeAllLists();
            if (!val) { return false; }
            currentFocus = -1;
            /*create a DIV element that will contain the items (values):*/
            a = document.createElement("DIV");
            a.setAttribute("id", this.id + "autocomplete-list");
            a.setAttribute("class", "autocomplete-items");
            /*append the DIV element as a child of the autocomplete container:*/
            this.parentNode.appendChild(a);
            /*for each item in the array...*/
            for (var i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                    if (arr[i].substr(0, val.length).toUpperCase().replace(/\s/g, '') == val.toUpperCase().replace(/\s/g, '')) {
                        /*create a DIV element for each matching element:*/
                        b = document.createElement("DIV");
                        /*make the matching letters bold:*/
                        b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                        b.innerHTML += arr[i].substr(val.length);
                        b.innerHTML += "<input type='hidden' value='" + arr[i]+"'>"
                        b.addEventListener("click", function (e) {
                            inp.value = this.getElementsByTagName("input")[0].value;
                            closeAllLists();
                        })
                        a.appendChild(b);
                    }
            }
        });
        /*execute a function presses a key on the keyboard:*/
        inp.addEventListener("keydown", function (e) {
            
            var x = document.getElementById(this.id + "autocomplete-list");
            if (x) x = x.getElementsByTagName("div");
            if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
            } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                    /*and simulate a click on the "active" item:*/
                    if (x) x[currentFocus].click();
                }
            }
        });
    
        function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }
        function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
                if (elmnt != x[i]) {
                    x[i].parentNode.removeChild(x[i]);
                }
                // if (elmnt != inp) {
                //     x[i].parentNode.removeChild(x[i]);
                // }
                
            }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
    }
    autocomplete(document.getElementById('suburb'))
</script>
<script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAyFJft-jNj7_wcp56wVfEvdem46_p8-XE&language=en&region=AU&callback=initMap"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>